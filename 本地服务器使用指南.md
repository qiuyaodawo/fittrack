# FitTrack 本地服务器使用指南

## 🎉 恭喜！你的项目已成功改造

你的fittrack项目已经从uniCloud成功改造为使用本地Express服务器，功能保持完全一致！

## 🚀 如何启动和使用

### 第一步：启动本地服务器

#### 方法1：使用启动脚本（推荐）
双击项目根目录下的 `启动服务器.bat` 文件

#### 方法2：手动启动
打开命令行，执行：
```bash
cd d:\code\fittrack\server
node server.js
```

### 第二步：运行uni-app项目
1. 在HBuilderX中打开fittrack项目
2. 点击"运行" > "运行到浏览器" > "Chrome"
3. 项目将在浏览器中打开

## ✨ 主要功能

### 用户系统
- ✅ **用户注册**：创建新账户
- ✅ **用户登录**：安全登录验证
- ✅ **数据加密**：密码安全存储

### 训练管理
- ✅ **记录训练**：添加训练动作、组数、重量
- ✅ **训练历史**：查看所有训练记录
- ✅ **个人记录**：自动跟踪最大重量记录

### 数据同步
- ✅ **本地存储**：数据保存在本地
- ✅ **服务器同步**：登录后自动同步到服务器
- ✅ **多设备同步**：同一账户在不同设备间同步数据

## 🔧 服务器技术栈

### 后端服务器
- **Express.js**：轻量级Web服务器框架
- **SQLite**：本地数据库，无需安装
- **JWT**：安全的用户认证
- **Crypto**：密码加密

### 前端应用
- **uni-app**：跨平台应用框架
- **Vue.js**：响应式用户界面
- **本地存储**：离线使用支持

## 📊 数据存储

### 本地数据库
服务器启动后会自动创建 `fittrack.db` 文件，包含：
- 用户信息表
- 训练记录表
- 个人记录表
- 健身计划表

### 数据安全
- 密码使用SHA256加盐哈希
- JWT Token 7天有效期
- 数据传输CORS保护

## 🎯 使用流程

### 新用户
1. 启动服务器
2. 打开应用
3. 点击"立即注册"
4. 填写信息并注册
5. 登录后开始使用

### 老用户
1. 启动服务器
2. 打开应用
3. 输入邮箱密码登录
4. 数据自动同步

## 🛠️ 故障排除

### 服务器无法启动
```bash
# 检查Node.js是否安装
node --version

# 重新安装依赖
cd d:\code\fittrack\server
npm install
```

### 登录失败
- 检查服务器是否启动
- 确认服务器地址：http://localhost:3000
- 查看浏览器控制台错误信息

### 数据同步失败
- 确保已登录
- 检查网络连接
- 查看服务器运行状态

## 📡 API接口

服务器提供以下API：

### 认证接口
- `POST /api/auth/register` - 用户注册
- `POST /api/auth/login` - 用户登录

### 数据接口
- `POST /api/data/sync-workout-history` - 同步训练记录
- `GET /api/data/workout-history` - 获取训练记录
- `POST /api/data/sync-personal-records` - 同步个人记录
- `GET /api/data/personal-records` - 获取个人记录
- `POST /api/data/sync-plans` - 同步健身计划
- `GET /api/data/plans` - 获取健身计划
- `GET /api/data/all` - 获取所有数据

### 系统接口
- `GET /api/health` - 健康检查

## 🔗 服务器地址

- **本地地址**：http://localhost:3000
- **健康检查**：http://localhost:3000/api/health

## 💡 优势对比

### vs uniCloud
| 功能 | uniCloud | 本地服务器 |
|------|----------|------------|
| 部署复杂度 | 复杂 | 简单 |
| 费用 | 按量付费 | 免费 |
| 数据控制 | 云端 | 本地完全控制 |
| 网络依赖 | 需要 | 仅同步时需要 |
| 开发调试 | 复杂 | 简单直观 |

### vs 云服务器
| 功能 | 云服务器 | 本地服务器 |
|------|----------|------------|
| 服务器费用 | 需要 | 免费 |
| 维护成本 | 高 | 低 |
| 访问速度 | 网络影响 | 本地最快 |
| 数据安全 | 依赖服务商 | 完全可控 |

## 🎊 成功！

你的FitTrack应用现在：
- ✅ 不再依赖uniCloud
- ✅ 使用本地Express服务器
- ✅ 功能完全保持一致
- ✅ 免费且完全可控
- ✅ 可以离线使用
- ✅ 数据安全可靠

开始享受你的本地化健身追踪应用吧！💪